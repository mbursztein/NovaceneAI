(function(a){function n(d){u(d.find(".s201_images tbody"));v(d.find(".s201_tabs ul"));d.find(".s201_tabs").tabs();d.find(".s201_import_tabs").tabs();d.find(".s201_custom_color").wpColorPicker({palettes:!0,change:function(b,c){0==q&&a(this).closest(".s201_wrap_slides").find(".s201_vertical_chk").trigger("change")}});d.find("a.iris-square-value").attr("href","javascript:;")}function u(d){d.sortable({handle:"td.handle",cursor:"move",start:function(b,c){pos_origi=[];a(this).closest("tbody").find("tr .s201_slider_pos").each(function(){pos_origi.push(a(this).val())})},
update:function(b,c){a(this).closest("tbody").find("tr .s201_slider_pos").each(function(b){a(this).val(pos_origi[b])});a(this).closest(".s201_wrap_slides").find(".s201_vertical_chk").trigger("change")}})}function v(d){d.sortable({handle:".handle",cursor:"move",update:function(b,c){var d=a(this).closest(".s201_tabs");d.find("li.sortable-item").each(function(){var b=a(this).attr("aria-controls");d.append(d.find("#"+b))});a(this).closest(".s201_wrap_slides").find(".s201_vertical_chk").trigger("change")}})}
function x(d){d.find("td.handle").each(function(b,c){a(this).text(b+1)})}function p(d,b){if(a("#s201_enable_preview").is(":checked")){var c=a("#s201_slides-"+d),h=c.find(".s201_tabs .s201_tab_content").length,w=c.find(".s201_vertical_chk").is(":checked"),y=c.find(".s201_custom_pos_chk").is(":checked"),k=parseInt(c.find(".s201_max_width").val()),m=c.find(".s201_slider_style").val(),e=c.find(".s201_pn_style").val(),l=c.find(".s201_nav_style").val(),f=a('<div id="s201_bai_slider_'+d+'"'+(1<h?' class="s201_slides"':
"")+">"+a("#s201_default_template").html()+"</div>");c.find(".s201_always_show_label_chk").is(":checked")&&f.find(".s201_label_text").addClass("s201_always_show");c.find(".s201_full_width_chk").is(":checked")&&f.addClass("s201_full_width");k&&f.css({"max-width":k+"px"});f.find(".s201_slider").removeClass("s201_style_1").addClass("s201_"+m);f.find(".s201_prev_next").removeClass("s201_style_1").addClass("s201_"+e);f.find(".s201_pager").removeClass("s201_style_1").addClass("s201_"+l);var g=f.find('[data-part="holder"]:eq(0)').clone(),
q=g.find(".s201_item_img:eq(1)").clone();q.removeAttr("style");q.find(".s201_slider").removeAttr("style");g.find(".s201_item_img:eq(1)").remove();g.find(".s201_side_img:eq(1)").clone();a();c.find(".s201_tabs>ul>li>a").each(function(b){var d=c.find(".s201_tab_content"+a(this).attr("href")),h=d.find(".s201_caption").val(),k="";d.find(".s201_slider_pos").each(function(){k+=a(this).val()});var e=g.clone();b&&e.removeClass("s201_slide_active");var l=100/d.find(".s201_images img").length,m=100,t=100,p,
n;c.find(".s201_side_by_side_chk").is(":checked")?(e.empty(),e.addClass("s201_side"),d.find(".s201_images img").each(function(b){b=a(this).attr("data-src");var c=a(this).closest("tr").find(".s201_label").val();c&&(c='<div class="s201_label_text">'+c+"</div>");e.append('<div class="s201_side_img"><img src="'+b+'" alt=""/>'+c+"</div>")}),h&&e.append('<div class="s201_caption_text"><span>'+h+"</span></div>")):a(d.find(".s201_images img").get().reverse()).each(function(b){var c=q.clone(),d=a(this).attr("data-src"),
f=a(this).closest("tr").find(".s201_label").val(),g=a(this).closest("tr").find(".s201_slider_pos").val();n={};0==b?(e.find(".s201_caption_text>span").text(h),e.find(".s201_img_holder").attr("src",d).attr("alt",f),e.find(".s201_item_img:first").css(n).find(".s201_label_text").text(f),e.find(".s201_item_img:first").find(".s201_overlay_img>img").attr("src",d).attr("alt",f),f||e.find('.s201_item_img:first [data-part="label"]').remove(),h||e.find(".s201_caption_text").remove()):(y&&k?g&&g<m&&(m=g):m-=
l,t-=l,w?(n.height=m+"%",p={left:100-t+"%"}):(n.width=m+"%",p={top:100-t+"%"}),c.find(".s201_overlay_img>img").attr("src",d).attr("alt",f),c.css(n).find(".s201_label_text").text(f),f||c.find('[data-part="label"]').remove(),c.find(".s201_slider").css(p),e.find(".s201_item_img:last").after(c))});f.find('[data-part="holder"]:last').after(e)});f.find('[data-part="holder"]:eq(0)').remove();f.find('[data-part="holder"]:eq(0)').remove();if(1<h){if("hidden"==l)f.find(".s201_pager").remove();else{for(k=2;k<
h;k++){var p=f.find(".s201_pager_item:eq(1)").clone();f.find(".s201_pager_item:last").after(p)}"thumbnails"==l&&f.find(".s201_pager_item").each(function(b){b=c.find(".s201_tabs>ul>li:eq("+b+")>a").attr("href");a(this).html('<img src="'+c.find(".s201_tabs>.s201_tab_content"+b+" .s201_wrap_img:eq(0)>img").attr("src")+'" alt=""/>')})}"hidden"==e&&f.find(".s201_prev_next").remove();f.find(".s201_prev_next").length||f.append('<div class="s201_next"></div>')}else f.find(".s201_pager").remove(),f.find(".s201_prev_next").remove();
void 0==b&&(b=c.find(".s201_holder").index(c.find(".s201_slide_active")));1<h&&0<=b&&(f.find(".s201_holder").removeClass("s201_slide_active"),f.find(".s201_holder:eq("+b+")").addClass("s201_slide_active"));c.find(".s201_preview_slides").empty().append(f);e=c.find(".s201_autoplay_speed").val();c.find(".s201_autoplay_chk").is(":checked")||(e=0);a("#s201_bai_slider_"+d).s201_BAI({vertical:w,sliding_behavior:c.find(".s201_sliding_behavior").val(),autoplay_speed:e,auto_slide:c.find(".s201_auto_slide_chk").is(":checked"),
slide_speed:c.find(".s201_slide_speed").val(),slide_delay:c.find(".s201_slide_delay").val()});a("#s201_slides-"+d+" .s201_custom_pos_chk").trigger("change");1<h&&0<=b&&(c.find(".s201_pager_item").removeClass("s201_pager_active"),c.find(".s201_pager_item:eq("+b+")").addClass("s201_pager_active"));var r="";h="#s201_slides-"+d;var n=a.extend(!0,{},s201_css_ary["default"],s201_css_ary[m]);c.find(".s201_additional_settings [data-css]").each(function(){var b=a(this).attr("data-css"),c=a(this).val();0<=
b.indexOf("opacity")?c/=100:"number"==a(this).attr("type")?c+="px":a(this).hasClass("s201_rgba")&&(c=z(c));b!=n[b].s0[0]&&a.each(n[b],function(a,b){r+=b[1].replaceAll(b[0],c)})});r=r.replaceAll("#s201_slides",h);a("#s201_bai_slider_"+d).prepend('<style type="text/css">'+r+"</style>")}}function z(a,b){var c=parseInt(a.slice(1,3),16),d=parseInt(a.slice(3,5),16),e=parseInt(a.slice(5,7),16);return b?"rgba("+c+","+d+","+e+","+b+")":c+","+d+","+e}var g,e,l;a(document).on("click",".s201_add_imgs_bt",function(){l=
a(this);g||(g=wp.media({title:"Add Images to Slider",button:{text:"Select"},library:{type:"image"},multiple:"add"}),g.on("open",function(){g.state().get("selection").reset()}),g.on("select",function(){var a="",b=l.closest(".s201_images"),c=b.closest(".s201_wrap_slides").attr("data-slides_id"),h=b.attr("data-slider_id");g.state().get("selection").each(function(d){a="thumbnail"in d.attributes.sizes?d.attributes.sizes.thumbnail.url:d.attributes.sizes.full.url;b.find("tbody").append('<tr class="sortable-item"><td class="handle"></td><td><div class="s201_wrap_img"><img id="'+
d.attributes.id+'" src="'+a+'" data-src="'+d.attributes.sizes.full.url+'"><div class="s201_change_img" title="Change Image"><i class="dashicons dashicons-update"></i></div><input class="s201_img_id" type="hidden" name="s201_img_id['+c+"]["+h+'][]" value="'+d.attributes.id+'" autocomplete="off"/></div></td><td><textarea class="s201_label" name="s201_label['+c+"]["+h+'][]" autocomplete="off" placeholder="Label..."></textarea></td><td class="s201_start_pos_cell"><input type="text" readonly name="s201_slider_pos['+
c+"]["+h+'][]" class="s201_slider_pos"/>%</td><td><div class="s201_remove_img" title="Remove Image"><i class="dashicons dashicons-no-alt"></i></div></td></tr>')});x(b);var e=b.closest(".s201_wrap_slides").find(".s201_tabs>ul>li.ui-tabs-active").index();p(l.closest(".s201_wrap_slides").attr("id").replace("s201_slides-",""),e)}));g.open()});a(document).on("click",".s201_change_img",function(){l=a(this);e||(e=wp.media({title:"Change Image to Slider",button:{text:"Select"},library:{type:"image"},multiple:!1}),
e.on("open",function(){var a=e.state().get("selection"),b=l.closest("td").find(".s201_img_id").val();b&&(attachment=wp.media.attachment(b),attachment.fetch(),a.add(attachment?[attachment]:[]))}),e.on("ready",function(){}),e.on("select",function(){var a=[],b="";e.state().get("selection").each(function(c){a.push(c.attributes.id);b="thumbnail"in c.attributes.sizes?c.attributes.sizes.thumbnail.url:c.attributes.sizes.full.url;l.closest("td").find("img").attr("id",c.attributes.id).attr("src",b).attr("data-src",
c.attributes.sizes.full.url);l.closest("td").find(".s201_img_id").val(c.attributes.id)});p(l.closest(".s201_wrap_slides").attr("id").replace("s201_slides-",""))}));e.open()});var q=0;a(document).ready(function(){a(document).on("click",".s201_add_tab",function(){var b=a(this).closest(".s201_tabs"),c=b.attr("data-inc");b.attr("data-inc",parseInt(c)+1);var d=b.attr("data-key")+"-"+c;a(this).closest("li").before('<li class="sortable-item s201_transition"><div class="handle"></div><a href="#tab-'+d+'"><span>Slide #'+
b.find("li").length+"</span></a></li>");b.append('<div id="tab-'+d+'" class="s201_tab_content"></div>');b.tabs("refresh");v(b.find("ul"));var e=a(this).closest(".s201_wrap_slides").attr("data-slides_id"),g=a("#s201_add_slides_template #tab-new_01010-0").html();g=g.replaceAll("[new_row_01010][0]","[new_row_01010]["+c+"]");g=g.replaceAll("new_row_01010",e);g=g.replace('data-slider_id="0"','data-slider_id="'+c+'"');b.find("#tab-"+d).html(g);u(b.find("#tab-"+d).find(".s201_images tbody"));a(this).closest("ul").find('a[href="#tab-'+
d+'"]').trigger("click");b.find("#tab-"+d).find(".s201_add_imgs_bt").trigger("click")});a(document).on("click",".s201_delete_slide_bt",function(){var b=a(this).closest(".s201_tabs"),c=a(this).closest(".s201_tab_content").attr("id");b.find('li[aria-controls="'+c+'"]').remove();a(this).closest(".s201_tab_content").remove();b.find("li>a>span").each(function(b){a(this).text("Slide #"+(b+1))});b.tabs("refresh");b.closest(".s201_wrap_slides").find(".s201_vertical_chk").trigger("change")});a(document).on("click",
".s201_remove_img",function(){var b=a(this).closest("table");a(this).closest("tr").remove();x(b);b.closest(".s201_wrap_slides").find(".s201_vertical_chk").trigger("change")});a(document).on("change",".s201_vertical_chk",function(b){p(a(this).closest(".s201_wrap_slides").attr("id").replace("s201_slides-",""))});a(document).on("change",".s201_additional_settings input,.s201_additional_settings select,.s201_side_by_side_chk",function(b){a(this).closest(".s201_wrap_slides").find(".s201_vertical_chk").trigger("change")});
a(document).on("change",".s201_autoplay_chk,.s201_auto_slide_chk",function(b){a(this).is(":checked")?a(this).closest("tr").find('input[type="number"]').removeAttr("disabled"):a(this).closest("tr").find('input[type="number"]').attr("disabled","disabled")});a(document).on("focusout",".s201_caption,.s201_label",function(b){a(this).closest(".s201_wrap_slides").find(".s201_vertical_chk").trigger("change")});a(document).on("change","#s201_enable_preview",function(b){a(this).is(":checked")?(a(".s201_vertical_chk").trigger("change"),
a(".s201_preview").show()):a(".s201_preview").hide()});a(document).on("change",".s201_custom_pos_chk",function(b){a(this).is(":checked")?(a(this).closest(".s201_preview").find(".s201_custom_pos_val").show(),a(this).closest(".s201_wrap_slides").find(".s201_start_pos_cell").show(),a(this).closest(".s201_preview").find(".s201_slide_active").trigger("mousemove")):(a(this).closest(".s201_preview").find(".s201_custom_pos_val").hide(),a(this).closest(".s201_wrap_slides").find(".s201_start_pos_cell").hide())});
a(document).on("mousemove",".s201_preview .s201_slide_active",function(b){if(!a(this).closest(".s201_preview").find(".s201_custom_pos_chk").is(":checked"))return!0;var c=a(this),d="",e=a(this).closest(".s201_options").find(".s201_vertical_chk").is(":checked");setTimeout(function(){c.find(".s201_item_img").each(function(b){if(0==b)return!0;d=e?Math.round(a(this).height()/c.height()*100)+"% "+d:Math.round(a(this).width()/c.width()*100)+"% "+d});c.closest(".s201_wrap_slides").find(".s201_custom_pos_val>span").text(" "+
d)},100)});a(document).on("click",".s201_save_custom_pos_bt",function(b){b=a(this).closest(".s201_preview").find(".s201_preview_slides");var c="",d=a(this).closest(".s201_options").find(".s201_vertical_chk").is(":checked");b.find(".s201_holder").each(function(b){b=a(this).closest(".s201_wrap_slides").find(".s201_tabs>ul>li:eq("+b+")>a").attr("href");var e=a(this).closest(".s201_wrap_slides").find(".s201_tab_content"+b+" tbody"),h=a(this).find(".s201_item_img").length-1,g=a(this);a(this).find(".s201_item_img").each(function(b){c=
d?Math.round(a(this).height()/g.height()*100):Math.round(a(this).width()/g.width()*100);e.find("tr:eq("+(h-b)+") .s201_slider_pos").val(c)})})});a(document).on("click",".s201_pager>span",function(b){a(this).closest(".s201_preview").find(".s201_slide_active").trigger("mousemove")});a(document).on("click","a.s201_toggle_settings_panel",function(b){a(this).next(".s201_additional_settings").toggle()});a(document).on("click","#s201_add_new_slides_bt",function(b){b=a("#s201_add_slides_template").html();
var c=a("#s201_add_slides_template").attr("data-inc");a("#s201_add_slides_template").attr("data-inc",parseInt(c)+1);b=b.replaceAll("new_01010",c);b=b.replaceAll("new_row_01010","new_row_"+c);a("#s201_all_slides").append(b);a("#s201_slides-"+c).find(".s201_add_imgs_bt").trigger("click");n(a("#s201_slides-"+c))});a(document).on("click",".s201_create_shortcode_bt",function(b){var c=a(this).closest(".s201_wrap_slides");b=a('<form action=""></form>').append(c.clone()).serializeFormJSON();b.action="s201_create_shortcode";
b.security=s201_ajax_nonce;b.post_id=a("#post_ID").val();b.s201_nonce=a("#s201_nonce").val();c.find(".s201_float_left > .s201_wrap_ajax").html('<span class="spinner is-active"></span>');a.post(ajaxurl,b,function(b){if(b){var d=c.attr("data-slides_id");c.attr("data-slides_id",b);c.find("[name]").each(function(){a(this).attr("name",a(this).attr("name").replace(d,b))});c.find(".s201_float_left > .s201_wrap_ajax").html('<input type="text" readonly="true" class="s201_shortcode" value="[s201_bai id=&quot;'+
b+'&quot;]"/><b>PHP Code:</b> <input type="text" readonly="true" class="s201_phpcode" value="&lt;?php if( function_exists(&#039;s201_bai_slider&#039;) ) s201_bai_slider('+b+'); ?&gt;"/>')}else c.find(".s201_float_left > .s201_wrap_ajax").html("Error! Cannot create shortcode!")})});a(document).on("focus",".s201_export_html,.s201_shortcode,.s201_phpcode,.s201_export_settings",function(b){a(this).select()});a(document).on("click",".s201_delete_slides",function(b){if(!confirm("Are you sure to delete this slider?"))return!1;
b=a(this).closest(".s201_wrap_slides").attr("data-slides_id");0>b.indexOf("new_row")&&(b={action:"s201_delete_slides",id:b},b.security=s201_ajax_nonce,a.post(ajaxurl,b,function(a){}));a(this).closest(".s201_wrap_slides").remove()});var d;a(document).on("mousedown",".iris-square",function(b){q=1;d=a(this)});a(document).on("mouseup","body",function(a){1==q&&(q=0,d.closest(".s201_wrap_slides").find(".s201_vertical_chk").trigger("change"))});a(document).on("mouseup",".iris-palette",function(b){a(this)[0].click()});
a(document).find("#s201_all_slides>.s201_wrap_slides .s201_tabs").each(function(b){p(a(this).attr("data-key"))});n(a("#s201_all_slides"))});String.prototype.replaceAll=function(a,b){return this.split(a).join(b)};a.fn.serializeFormJSON=function(){var d={},b=this.serializeArray();a.each(b,function(){d[this.name]?(d[this.name].push||(d[this.name]=[d[this.name]]),d[this.name].push(this.value||"")):d[this.name]=this.value||""});return d};(function(d){jQuery.fn.clone=function(){for(var b=d.apply(this,arguments),
c=this.find("textarea").add(this.filter("textarea")),e=b.find("textarea").add(b.filter("textarea")),g=this.find("select").add(this.filter("select")),l=b.find("select").add(b.filter("select")),k=0,m=c.length;k<m;++k)a(e[k]).val(a(c[k]).val());k=0;for(m=g.length;k<m;++k)l[k].selectedIndex=g[k].selectedIndex;return b}})(jQuery.fn.clone)})(jQuery);